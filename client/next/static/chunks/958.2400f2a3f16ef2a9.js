(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[958],{1958:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return v}});var a=r(85893),t=r(67294),n=r(73935),o=r(80927);let l=e=>function(s){return e.test(s)};var i=r(76601),d=r.n(i),c=r(40126),m=r(34434),u=r(19660);let p=e=>{let{textEror:s}=e;return(0,a.jsx)("div",{className:d().modalEror,children:s})},g=()=>{let[e,s]=(0,t.useState)(!1),[r,i]=(0,t.useState)(!1),[g,v]=(0,t.useState)(""),{modalShow:h}=(0,o.C)(e=>e.ModalWindowLogin),w={SurnameUser:"",NameUser:"",NumberUser:"",EmailUser:"",PasswordUser:"",IdRole:1},[x,j]=(0,t.useState)({EmailUser:"",PasswordUser:""}),[U,N]=(0,t.useState)(w),_=(0,o.T)(),F=l(/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu),b=l(/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$/);async function f(e){if(F(U.EmailUser)){if(b(U.NumberUser)){if(0!=U.SurnameUser.length&&0!=U.NameUser.length){var s,r;i(!1);let a=await (0,u.j)("auth/register",{Surname:U.SurnameUser,Name:U.NameUser,IdRole:U.IdRole,EmailUsers:U.EmailUser,NumberPhoneUsers:U.NumberUser,PasswordUsers:U.PasswordUser});(null==a?void 0:null===(s=a.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)?(i(!0),v(a.response.data.message)):(e.target.disabled=!0,i(!0),v("Пользователь создан!"),setTimeout(()=>{i(!1),N(w),e.target.disabled=!1},2e3))}else i(!0),v("Ошибка: Заполните все пустые поля")}else i(!0),v("Ошибка: Номер телефона не валиден")}else i(!0),v("Ошибка: email не валиден")}async function k(){if(""!=x.EmailUser&&""!=x.PasswordUser){var e;let s=await (0,u.j)("auth/login",{LoginUsers:x.EmailUser,PasswordUsers:x.PasswordUser});if(null===(e=s.data)||void 0===e?void 0:e.token){let e=await (0,u.I)("users/user",s.data.token);_(c.p.actions.cheked()),document.querySelector("body").style.overflowY="scroll",i(!1),_(m.T.actions.cheked(e.data))}else i(!0),v("Некоректный емэйл или пароль!")}else i(!0),v("Заполните пустые поля!")}return(0,a.jsx)(a.Fragment,{children:h&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{onClick:()=>{_(c.p.actions.cheked()),i(!1),document.querySelector("body").style.overflowY="scroll"},className:d().backgroundModalWindow}),r&&(0,a.jsx)(p,{textEror:g}),(0,n.createPortal)((0,a.jsxs)("div",{className:d().modalBlock,children:[(0,a.jsx)("p",{children:"Личный кабинет"}),(0,a.jsxs)("div",{className:d().selectsFormBtn,children:[(0,a.jsx)("button",{onClick:()=>s(!1),className:e?"":d().BtnActive,children:"Вход"}),(0,a.jsx)("button",{onClick:()=>s(!0),className:e?d().BtnActive:"",children:"Регистрация"})]}),e?(0,a.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,a.jsx)("p",{children:"Ваша фамилия *"}),(0,a.jsx)("div",{className:d().wrapperForm,children:(0,a.jsx)("input",{type:"text",className:d().inputsFormRegister,value:U.SurnameUser,onChange:e=>N({...U,SurnameUser:e.target.value})})}),(0,a.jsx)("p",{children:"Ваше имя *"}),(0,a.jsx)("div",{className:d().wrapperForm,children:(0,a.jsx)("input",{type:"text",className:d().inputsFormRegister,value:U.NameUser,onChange:e=>N({...U,NameUser:e.target.value})})}),(0,a.jsx)("p",{children:"Ваш номер телефона *"}),(0,a.jsx)("div",{className:d().wrapperForm,children:(0,a.jsx)("input",{type:"text",className:d().inputsFormRegister,value:U.NumberUser,onChange:e=>{N({...U,NumberUser:e.target.value.replace(/[^0-9]/g,"").substring(0,11)})}})}),(0,a.jsx)("p",{children:"Ваш email *"}),(0,a.jsx)("div",{className:d().wrapperForm,children:(0,a.jsx)("input",{type:"text",className:d().inputsFormRegister,value:U.EmailUser,onChange:e=>N({...U,EmailUser:e.target.value})})}),(0,a.jsx)("p",{children:"Ваш пароль *"}),(0,a.jsx)("div",{className:d().wrapperForm,children:(0,a.jsx)("input",{type:"text",className:d().inputsFormRegister,value:U.PasswordUser,onChange:e=>N({...U,PasswordUser:e.target.value})})}),(0,a.jsx)("div",{className:d().wrapperForm,children:(0,a.jsx)("button",{className:d().enterButton,onClick:f,children:"Регистрация"})})]}):(0,a.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,a.jsx)("p",{children:"Ваш email *"}),(0,a.jsx)("div",{className:d().wrapperForm,children:(0,a.jsx)("input",{type:"text",className:d().inputsFormLogin,value:x.EmailUser,onChange:e=>j({...x,EmailUser:e.target.value})})}),(0,a.jsx)("p",{children:"Пароль *"}),(0,a.jsx)("div",{className:d().wrapperForm,children:(0,a.jsx)("input",{type:"password",className:d().inputsFormLogin,value:x.PasswordUser,onChange:e=>j({...x,PasswordUser:e.target.value})})}),(0,a.jsx)("div",{className:d().wrapperForm,children:(0,a.jsx)("button",{className:d().enterButton,onClick:()=>k(),children:"Войти"})})]})]}),document.querySelector("#__next"))]})})};var v=g},76601:function(e){e.exports={backgroundModalWindow:"ModalWindowLogin_backgroundModalWindow__I3cTa",modalBlock:"ModalWindowLogin_modalBlock__4nctS",selectsFormBtn:"ModalWindowLogin_selectsFormBtn__etrDj",BtnActive:"ModalWindowLogin_BtnActive__HdNlK",wrapperForm:"ModalWindowLogin_wrapperForm__VwmBw",inputsFormLogin:"ModalWindowLogin_inputsFormLogin__wTX3Y",inputsFormRegister:"ModalWindowLogin_inputsFormRegister__VDov4",enterButton:"ModalWindowLogin_enterButton__mcLUp",modalEror:"ModalWindowLogin_modalEror__B2pLY"}}}]);